Version 4
SHEET 1 2420 1628
WIRE 352 -720 336 -720
WIRE 448 -720 416 -720
WIRE 528 -720 448 -720
WIRE 656 -720 592 -720
WIRE 240 -640 160 -640
WIRE 336 -640 336 -720
WIRE 336 -640 320 -640
WIRE 352 -640 336 -640
WIRE 448 -640 448 -720
WIRE 448 -640 432 -640
WIRE 464 -640 448 -640
WIRE 576 -640 544 -640
WIRE 656 -640 656 -720
WIRE 656 -640 640 -640
WIRE 448 -576 448 -640
WIRE 448 -576 208 -576
WIRE 352 -528 336 -528
WIRE 448 -528 416 -528
WIRE 528 -528 448 -528
WIRE 656 -528 656 -640
WIRE 656 -528 592 -528
WIRE 160 -448 160 -640
WIRE 240 -448 160 -448
WIRE 336 -448 336 -528
WIRE 336 -448 320 -448
WIRE 352 -448 336 -448
WIRE 448 -448 448 -528
WIRE 448 -448 432 -448
WIRE 464 -448 448 -448
WIRE 576 -448 544 -448
WIRE 656 -448 656 -528
WIRE 656 -448 640 -448
WIRE 112 -432 -352 -432
WIRE -352 -416 -352 -432
WIRE 16 -400 -112 -400
WIRE -112 -384 -112 -400
WIRE 448 -368 448 -448
WIRE 448 -368 256 -368
WIRE 656 -336 656 -448
WIRE 656 -336 304 -336
WIRE -352 -320 -352 -336
WIRE 1648 -304 400 -304
WIRE -112 -288 -112 -304
WIRE 1504 -272 448 -272
WIRE -144 -208 -160 -208
WIRE -32 -208 -64 -208
WIRE 528 -208 496 -208
WIRE 640 -208 608 -208
WIRE -32 -144 -32 -208
WIRE 16 -144 16 -400
WIRE 64 -144 64 -160
WIRE 112 -144 112 -432
WIRE 160 -144 160 -448
WIRE 208 -144 208 -576
WIRE 256 -144 256 -368
WIRE 304 -144 304 -336
WIRE 400 -144 400 -304
WIRE 448 -144 448 -272
WIRE 496 -144 496 -208
WIRE -144 -32 -160 -32
WIRE 624 -32 592 -32
WIRE 816 -32 704 -32
WIRE -272 0 -272 -16
WIRE -144 16 -160 16
WIRE 704 16 592 16
WIRE 816 16 784 16
WIRE 1088 16 1008 16
WIRE 1088 32 1088 16
WIRE 608 64 592 64
WIRE 624 64 608 64
WIRE 816 64 688 64
WIRE -384 80 -496 80
WIRE -272 80 -272 64
WIRE -272 80 -304 80
WIRE -144 80 -272 80
WIRE -272 96 -272 80
WIRE 704 112 592 112
WIRE 816 112 784 112
WIRE 1088 128 1088 112
WIRE 1008 160 1008 16
WIRE 1008 160 592 160
WIRE 1152 160 1008 160
WIRE 1232 160 1152 160
WIRE -384 176 -464 176
WIRE -272 176 -272 160
WIRE -272 176 -304 176
WIRE -144 176 -272 176
WIRE -272 192 -272 176
WIRE 1008 192 1008 160
WIRE 1152 192 1152 160
WIRE 1232 192 1232 160
WIRE 960 208 592 208
WIRE 912 256 592 256
WIRE -144 288 -432 288
WIRE 1008 288 1008 272
WIRE 1152 288 1152 256
WIRE 1152 288 1008 288
WIRE 1232 288 1232 256
WIRE 1232 288 1152 288
WIRE 608 304 592 304
WIRE 1008 320 1008 288
WIRE 1360 320 1008 320
WIRE 1504 320 1504 -272
WIRE 1504 320 1440 320
WIRE 1536 320 1504 320
WIRE 1648 320 1648 -304
WIRE 1648 320 1616 320
WIRE 1760 320 1648 320
WIRE 1776 320 1760 320
WIRE 1872 320 1856 320
WIRE 2016 320 1872 320
WIRE 1648 336 1648 320
WIRE 2016 336 2016 320
WIRE 2016 336 1936 336
WIRE 864 352 592 352
WIRE 1008 352 1008 320
WIRE 1152 352 1008 352
WIRE 1232 352 1152 352
WIRE 2016 352 2016 336
WIRE 1008 368 1008 352
WIRE 1152 368 1152 352
WIRE -144 384 -400 384
WIRE 912 384 912 256
WIRE 960 384 912 384
WIRE 1232 384 1232 352
WIRE 640 400 592 400
WIRE 864 400 864 352
WIRE 864 400 720 400
WIRE 1648 416 1648 400
WIRE -144 448 -160 448
WIRE 704 448 592 448
WIRE 864 448 864 400
WIRE 864 448 784 448
WIRE 2016 448 2016 416
WIRE 2016 448 1984 448
WIRE 1008 464 1008 448
WIRE 1152 464 1152 432
WIRE 1152 464 1008 464
WIRE 1232 464 1232 448
WIRE 1232 464 1152 464
WIRE 2016 464 2016 448
WIRE 1008 480 1008 464
WIRE -144 496 -160 496
WIRE 768 496 592 496
WIRE 864 496 864 448
WIRE 864 496 848 496
WIRE -32 656 -32 624
WIRE 496 672 496 624
WIRE 672 672 496 672
WIRE 864 672 864 496
WIRE 864 672 752 672
WIRE 448 720 448 624
WIRE 1056 720 448 720
WIRE 1056 736 1056 720
WIRE -32 752 -32 736
WIRE 400 784 400 624
WIRE 976 784 400 784
WIRE 1056 832 1056 816
WIRE 16 848 16 624
WIRE 16 848 -768 848
WIRE 304 848 304 624
WIRE 656 848 304 848
WIRE 64 864 64 624
WIRE 64 864 -112 864
WIRE 256 864 256 624
WIRE 448 864 256 864
WIRE 976 864 976 784
WIRE -768 880 -768 848
WIRE -304 944 -320 944
WIRE -208 944 -240 944
WIRE -112 944 -112 864
WIRE -112 944 -128 944
WIRE -96 944 -112 944
WIRE 0 944 -16 944
WIRE 16 944 0 944
WIRE 112 944 112 624
WIRE 112 944 96 944
WIRE 240 944 112 944
WIRE 336 944 320 944
WIRE 352 944 336 944
WIRE 448 944 448 864
WIRE 448 944 432 944
WIRE 464 944 448 944
WIRE 576 944 544 944
WIRE 656 944 656 848
WIRE 656 944 640 944
WIRE 976 960 976 944
WIRE -768 976 -768 960
WIRE -256 1024 -320 1024
WIRE -112 1024 -112 944
WIRE -112 1024 -192 1024
WIRE -80 1024 -112 1024
WIRE 0 1024 0 944
WIRE 0 1024 -16 1024
WIRE 336 1024 336 944
WIRE 352 1024 336 1024
WIRE 448 1024 448 944
WIRE 448 1024 416 1024
WIRE 528 1024 448 1024
WIRE 656 1024 656 944
WIRE 656 1024 592 1024
WIRE 208 1104 208 624
WIRE 448 1104 208 1104
WIRE 160 1152 160 624
WIRE 240 1152 160 1152
WIRE 336 1152 320 1152
WIRE 352 1152 336 1152
WIRE 448 1152 448 1104
WIRE 448 1152 432 1152
WIRE 464 1152 448 1152
WIRE 576 1152 544 1152
WIRE 656 1152 656 1024
WIRE 656 1152 640 1152
WIRE 336 1232 336 1152
WIRE 352 1232 336 1232
WIRE 448 1232 448 1152
WIRE 448 1232 416 1232
WIRE 528 1232 448 1232
WIRE 656 1232 656 1152
WIRE 656 1232 592 1232
WIRE -400 1296 -400 384
WIRE 1984 1296 1984 448
WIRE 1984 1296 -400 1296
WIRE -432 1328 -432 288
WIRE 1936 1328 1936 336
WIRE 1936 1328 -432 1328
WIRE -464 1360 -464 176
WIRE 1872 1360 1872 320
WIRE 1872 1360 -464 1360
WIRE -496 1392 -496 80
WIRE 1760 1392 1760 320
WIRE 1760 1392 -496 1392
FLAG 608 304 0
FLAG 64 -160 0
FLAG -112 -288 0
FLAG -32 752 0
FLAG -160 16 0
FLAG -160 496 0
FLAG 640 -208 0
FLAG 1088 128 0
FLAG 1008 480 0
FLAG 960 256 0
FLAG 960 432 0
FLAG 1648 416 0
FLAG 2016 464 0
FLAG 2016 320 BATT
FLAG -352 -320 0
FLAG -768 976 0
FLAG -320 1024 0
FLAG 1056 832 0
FLAG 976 960 0
FLAG 816 -32 0
FLAG 816 16 0
FLAG 816 64 0
FLAG 816 112 0
FLAG -272 256 0
FLAG -272 -16 0
FLAG 608 64 SS
FLAG -160 448 0
FLAG -160 -32 0
FLAG -160 -208 0
FLAG -320 944 0
SYMBOL res 624 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 4.02K
SYMBOL res 720 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100K
SYMBOL res 800 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 499K
SYMBOL res 800 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10K
SYMBOL cap 688 48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL res 736 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 499K
SYMBOL res 800 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10K
SYMBOL res 864 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10K
SYMBOL voltage -112 -400 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage -32 640 R0
WINDOW 0 10 15 Left 2
WINDOW 3 10 96 Left 2
WINDOW 123 24 138 Left 2
WINDOW 39 24 117 Left 2
SYMATTR InstName V2
SYMATTR Value -5
SYMBOL res 336 -464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1K
SYMBOL res 448 -464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 64.9K
SYMBOL res 560 -464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 15K
SYMBOL cap 416 -544 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1n
SYMBOL cap 592 -544 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 270p
SYMBOL cap 640 -464 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 2n
SYMBOL res 336 -656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1K
SYMBOL res 448 -656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 64.9K
SYMBOL res 560 -656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 15K
SYMBOL cap 416 -736 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 1n
SYMBOL cap 592 -736 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 270p
SYMBOL cap 640 -656 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 2n
SYMBOL res 0 960 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R14
SYMATTR Value 6.65K
SYMBOL res -112 960 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R15
SYMATTR Value 78.7K
SYMBOL res -224 960 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R16
SYMATTR Value 121K
SYMBOL cap -80 1040 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C8
SYMATTR Value 560p
SYMBOL cap -256 1040 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C9
SYMATTR Value 39p
SYMBOL cap -304 960 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C10
SYMATTR Value 1n
SYMBOL res 768 656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 10K
SYMBOL voltage 1088 16 R0
WINDOW 123 24 138 Left 2
WINDOW 39 24 117 Left 2
SYMATTR InstName V3
SYMATTR Value 12
SYMBOL sw 1008 288 M180
WINDOW 0 28 89 Left 2
WINDOW 3 22 20 Left 2
SYMATTR InstName S1
SYMATTR Value FET_SW
SYMBOL sw 1008 464 M180
WINDOW 0 24 93 Left 2
WINDOW 3 23 19 Left 2
SYMATTR InstName S2
SYMATTR Value FET_SW
SYMBOL diode 1136 256 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value BD
SYMBOL diode 1136 432 M180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value BD
SYMBOL ind 1344 336 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
WINDOW 39 -16 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 6.8µ
SYMATTR SpiceLine Rser=5m Rpar=2K
SYMBOL res 1520 336 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R21
SYMATTR Value 5m
SYMBOL cap 1216 192 R0
SYMATTR InstName C14
SYMATTR Value 500p
SYMBOL cap 1216 384 R0
SYMATTR InstName C15
SYMATTR Value 500p
SYMBOL cap 1632 336 R0
WINDOW 3 43 32 Left 2
WINDOW 39 27 54 Left 2
SYMATTR Value 150µ
SYMATTR SpiceLine x4
SYMATTR InstName C16
SYMBOL res 1760 336 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R22
SYMATTR Value 3m
SYMBOL cap 2000 352 R0
WINDOW 39 24 84 Left 2
SYMATTR SpiceLine Rser=10m
SYMATTR InstName C17
SYMATTR Value .3
SYMBOL res -48 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 10K
SYMBOL voltage 976 848 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value 5
SYMBOL voltage 1056 720 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 5
SYMBOL voltage -352 -432 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 1.98
SYMBOL voltage -768 864 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V7
SYMATTR Value 1.68
SYMBOL res 336 960 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R17
SYMATTR Value 6.65K
SYMBOL res 448 960 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R18
SYMATTR Value 78.7K
SYMBOL res 560 960 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value 121K
SYMBOL cap 416 1040 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C11
SYMATTR Value 560p
SYMBOL cap 592 1040 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C12
SYMATTR Value 39p
SYMBOL cap 640 960 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C13
SYMATTR Value 1n
SYMBOL res 336 1168 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R25
SYMATTR Value 6.65K
SYMBOL res 448 1168 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R26
SYMATTR Value 78.7K
SYMBOL res 560 1168 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R27
SYMATTR Value 121K
SYMBOL cap 416 1248 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C18
SYMATTR Value 560p
SYMBOL cap 592 1248 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C19
SYMATTR Value 39p
SYMBOL cap 640 1168 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C20
SYMATTR Value 1n
SYMBOL AD8452 208 240 R0
SYMATTR InstName U1
SYMBOL res -288 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 10K
SYMBOL res -288 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 10K
SYMBOL cap -288 96 R0
SYMATTR InstName C21
SYMATTR Value 1n
SYMBOL cap -288 0 R0
SYMATTR InstName C22
SYMATTR Value 100p
SYMBOL cap -288 192 R0
SYMATTR InstName C23
SYMATTR Value 100p
TEXT 2232 504 Right 2 ;Simple Battery Model
TEXT 2232 472 Right 2 !.ic V(batt)=3.2
TEXT 960 1072 Left 2 !.tran 50m\n.model FET_SW SW(Ron=2m Roff=1G Vt=2 Vh=-1)\n.model BD D(Ron=10m Roff=1G epsilon=10m Vfwd=0.35)
TEXT -728 992 Left 2 ;Voltage Setpoint
TEXT -384 -280 Left 2 ;Current Setpoint
TEXT 704 -472 Left 2 ;Charge CC Loop
TEXT 696 -672 Left 2 ;Discharge CC Loop
TEXT 688 944 Left 2 ;Charge CV Loop
TEXT -152 1136 Left 2 ;Discharge CV Loop
TEXT 1024 904 Left 2 ;Mode
TEXT 1096 776 Left 2 ;Enable
TEXT 856 64 Left 2 !.ic V(ss)=0
TEXT -528 784 Right 2 ;Votlage Setpoint = Battery Voltage * 0.4\n           1.68V = 4.2V * 0.4
TEXT -176 -504 Right 2 ;Current Setpoint = Battery Current * 0.198\n        1.98V = 10A * 0.198 V/A
TEXT -504 -640 Bottom 2 ;AD8452 - Precision Integrated Analog Front End, Controller, and PWM for Battery Test and Formation Systems\nBattery Test and Formation, Charging Mode (4.2V 10A)
TEXT -72 1416 Left 2 ;Notes: \n  If the simulation model is not found please update with the "Sync Release" command from the "Tools" menu.\n  It remains the customer's responsibility to verify proper and reliable operation in the actual application.\n  Component substitution and printed circuit board layout may significantly affect circuit performance or reliability.\n  Contact your local sales representative for assistance. This circuit is distributed to customers only for use with LTC parts.\n  Copyright © 2018, 2019 Analog Devices Inc.  All rights reserved.
LINE Normal -352 1280 -352 896 2
LINE Normal 672 1280 -352 1280 2
LINE Normal 672 1088 672 1280 2
LINE Normal 224 1088 672 1088 2
LINE Normal 224 896 224 1088 2
LINE Normal -352 896 224 896 2
RECTANGLE Normal 2289 540 1969 284 2
RECTANGLE Normal -176 -256 -400 -448 2
RECTANGLE Normal -528 1008 -816 832 2
RECTANGLE Normal 912 -400 144 -592 2
RECTANGLE Normal 912 -592 144 -768 2
RECTANGLE Normal 896 1088 224 832 2
